{"version":3,"file":"js/decidim_budgets-9523ad1a18a3f360509e.js","mappings":"qCAAA,EAAE,IAAM,CACN,MAAMA,EAAwB,IAAM,CAClC,MAAMC,EAAc,SAAS,iBAAiB,2BAA2B,EACzE,GAAIA,EAAY,OAAQ,CACtB,MAAMC,EAAc,SAAS,iBAAiB,0BAA0B,EACxE,IAAIC,EAAsB,GACtBC,EAAsB,GAC1B,MAAMC,EAAuB,yBAQ7B,GAPI,OAAO,WAAW,oBAAoB,EAAE,SAC1CF,EAAsBF,EAAY,CAAC,EACnCG,EAAsBF,EAAY,CAAC,IAEnCC,EAAsBF,EAAY,CAAC,EACnCG,EAAsBF,EAAY,CAAC,GAEjC,CAACD,EACH,OAEqBE,EAAoB,sBAAsB,EAAE,OAC5C,EACrBC,EAAoB,UAAU,OAAOC,CAAoB,EAEzDD,EAAoB,UAAU,IAAIC,CAAoB,CAE1D,CACF,EACA,OAAO,iBAAiB,SAAUL,CAAqB,EACvD,OAAO,eAAiB,OAAO,gBAAkB,CAAC,EAClD,OAAO,eAAe,sBAAwBA,CAChD,CAAC,C,qBC7BD,MAAMM,EAAwB,IAAM,CAClC,MAAMC,EAAiB,EAAE,8BAA8B,EACvD,OAAO,SAASA,EAAe,KAAK,yBAAyB,EAAG,EAAE,IAAM,CAC1E,EACMC,EAAaC,GAAY,CAC7B,GAAI,CAACA,EACH,MAAO,GAET,MAAMC,EAAW,CACf,EAAE,iBAAiB,EAAE,KAAK,eAAe,EAAE,QAAQ,SAAS,OAAQ,EAAE,EACtE,GAAG,SAAS,QAAQ,IACpB,GAAG,SAAS,IAAI,IAChB,GACF,EACA,IAAIC,EAAO,GACX,OAAAD,EAAS,QAASE,GAAQ,CACpBH,EAAQ,WAAWG,CAAG,IACxBD,EAAO,GAEX,CAAC,EACMA,CACT,EACME,EAAiBC,GACjBR,EAAsB,GAEfQ,EAAI,KAAK,QAAQ,IAAM,UAEvBA,EAAI,QAAQ,aAAa,EAAE,OAAS,GAEpCA,EAAI,QAAQ,qBAAqB,EAAE,OAAS,GAE5CA,EAAI,KAAK,IAAI,IAAM,0BAEnBA,EAAI,QAAQ,MAAM,EAAE,OAAS,GAE7BN,EAAUM,EAAI,KAAK,MAAM,CAAC,EAX5B,GAaE,YAAS,cAAc,kBAAkB,GAAK,SAAS,cAAc,kBAAkB,EAAE,SAASA,EAAI,CAAC,CAAC,GAKrH,EAAE,IAAM,CACN,MAAMC,EAAoB,EAAE,oBAAoB,EAC1CC,EAAY,EAAE,yBAAyB,EACvCC,EAAiBD,EAAU,KAAK,MAAM,EACtCE,EAAsBF,EAAU,KAAK,EACrCG,EAAc,OAAO,QAAQ,OAAO,IAAI,eAAe,EAC7D,IAAIC,EAAeF,EACnB,GAAIH,EAAkB,OAAS,EAC7B,OAEF,MAAMM,EAAuB,CAACT,EAAKU,EAAS,OAAS,CAC/CA,GAAUA,IAAW,MACvBN,EAAU,KAAK,cAAeM,CAAM,EAEpCN,EAAU,WAAW,aAAa,EAEpCA,EAAU,KAAK,OAAQJ,CAAG,EAC1BI,EAAU,KAAKI,CAAY,EAC3B,OAAO,QAAQ,eAAe,mBAAmB,EAAE,KAAK,CAC1D,EACA,EAAE,QAAQ,EAAE,GAAG,QAAS,IAAMG,GAAU,CACtCH,EAAeF,EACf,MAAMM,EAAQ,EAAED,EAAM,aAAa,EAC9BV,EAAcW,CAAK,IACtBD,EAAM,eAAe,EACrBF,EAAqBG,EAAM,KAAK,MAAM,EAAGA,EAAM,KAAK,QAAQ,CAAC,EAEjE,CAAC,EACD,EAAE,UAAUL,CAAW,IAAI,EAAE,GAAG,QAAUI,GAAU,CAClDA,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EACtB,MAAMC,EAAQ,EAAED,EAAM,aAAa,EACnCH,EAAeI,EAAM,KAAK,EAC1BH,EAAqBG,EAAM,KAAK,MAAM,EAAGA,EAAM,KAAK,QAAQ,CAAC,CAC/D,CAAC,EACD,EAAE,yCAAyC,EAAE,GAAG,QAAS,IAAM,CAC7DJ,EAAeF,EACfG,EAAqBJ,CAAc,CACrC,CAAC,CACH,CAAC,C,qBCjFD,EAAE,IAAM,CACN,MAAMQ,EAAY,EAAE,0BAA0B,EAExCC,EADsB,EAAE,0CAA0C,EACnB,KAAK,iBAAiB,EACrEnB,EAAiB,EAAE,8BAA8B,EACjDoB,EAAc,EAAE,qBAAqB,EACrCC,EAAkB,SAASF,EAA0B,EAAE,EACvDG,EAA0B,SAAS,iBAAiB,qCAAqC,EACzFC,EAAeP,GAAU,CAC7BA,EAAM,gBAAgB,EACtBA,EAAM,eAAe,CACvB,EACAI,EAAY,GAAG,QAAS,OAAQ,IAAM,CACpC,EAAE,sBAAsB,EAAE,MAAM,CAClC,CAAC,EACDF,EAAU,GAAG,QAAS,uBAAyBF,GAAU,CACvD,MAAMQ,EAAoB,SAASxB,EAAe,KAAK,yBAAyB,EAAG,EAAE,EAC/EyB,EAAiB,EAAET,EAAM,aAAa,EACtCU,EAAoB,SAASD,EAAe,KAAK,iBAAiB,EAAG,EAAE,EACzEA,EAAe,KAAK,UAAU,EAChCF,EAAYP,CAAK,EACRS,EAAe,KAAK,UAAU,IAAM,QAAUD,EAAoBE,EAAoBL,IAC/F,OAAO,QAAQ,eAAe,eAAe,EAAE,OAAO,EACtDE,EAAYP,CAAK,EAErB,CAAC,EACDM,EAAwB,QAAQ,SAASK,EAAQ,CAC/CA,EAAO,iBAAiB,QAAS,SAASX,EAAO,CAC/CM,EAAwB,QAAQ,SAASM,EAAS,CAChDA,EAAQ,UAAU,OAAO,sBAAsB,CACjD,CAAC,EACDZ,EAAM,cAAc,UAAU,IAAI,sBAAsB,CAC1D,CAAC,CACH,CAAC,CACH,CAAC,C,0BClCD,IAAIa,EAAM,CACT,wCAAyC,KAC1C,EAGA,SAASC,EAAeC,EAAK,CAC5B,IAAIC,EAAKC,EAAsBF,CAAG,EAClC,OAAOG,EAAoBF,CAAE,CAC9B,CACA,SAASC,EAAsBF,EAAK,CACnC,GAAG,CAACG,EAAoB,EAAEL,EAAKE,CAAG,EAAG,CACpC,IAAII,EAAI,IAAI,MAAM,uBAAyBJ,EAAM,GAAG,EACpD,MAAAI,EAAE,KAAO,mBACHA,CACP,CACA,OAAON,EAAIE,CAAG,CACf,CACAD,EAAe,KAAO,UAA8B,CACnD,OAAO,OAAO,KAAKD,CAAG,CACvB,EACAC,EAAe,QAAUG,EACzBG,EAAO,QAAUN,EACjBA,EAAe,GAAK,K,gHCrBhBO,EAA2B,CAAC,EAGhC,SAASH,EAAoBI,EAAU,CAEtC,IAAIC,EAAeF,EAAyBC,CAAQ,EACpD,GAAIC,IAAiB,OACpB,OAAOA,EAAa,QAGrB,IAAIH,EAASC,EAAyBC,CAAQ,EAAI,CAGjD,QAAS,CAAC,CACX,EAGA,OAAAE,EAAoBF,CAAQ,EAAEF,EAAQA,EAAO,QAASF,CAAmB,EAGlEE,EAAO,OACf,E,WCrBAF,EAAoB,EAAI,SAASE,EAAQ,CACxC,IAAIK,EAASL,GAAUA,EAAO,WAC7B,UAAW,CAAE,OAAOA,EAAO,OAAY,EACvC,UAAW,CAAE,OAAOA,CAAQ,EAC7B,OAAAF,EAAoB,EAAEO,EAAQ,CAAE,EAAGA,CAAO,CAAC,EACpCA,CACR,C,iBCNAP,EAAoB,EAAI,SAASQ,EAASC,EAAY,CACrD,QAAQC,KAAOD,EACXT,EAAoB,EAAES,EAAYC,CAAG,GAAK,CAACV,EAAoB,EAAEQ,EAASE,CAAG,GAC/E,OAAO,eAAeF,EAASE,EAAK,CAAE,WAAY,GAAM,IAAKD,EAAWC,CAAG,CAAE,CAAC,CAGjF,C,iBCPAV,EAAoB,EAAI,SAASW,EAAKC,EAAM,CAAE,OAAO,OAAO,UAAU,eAAe,KAAKD,EAAKC,CAAI,CAAG,C,iBCAtGZ,EAAoB,EAAI,iB,8FCGxB,Q","sources":["webpack://decidim-development-app/../../.rbenv/versions/3.3.4/lib/ruby/gems/3.3.0/gems/decidim-budgets-0.30.1/app/packs/src/decidim/budgets/progressFixed.js","webpack://decidim-development-app/../../.rbenv/versions/3.3.4/lib/ruby/gems/3.3.0/gems/decidim-budgets-0.30.1/app/packs/src/decidim/budgets/exit_handler.js","webpack://decidim-development-app/../../.rbenv/versions/3.3.4/lib/ruby/gems/3.3.0/gems/decidim-budgets-0.30.1/app/packs/src/decidim/budgets/projects.js","webpack://decidim-development-app/../../.rbenv/versions/3.3.4/lib/ruby/gems/3.3.0/gems/decidim-budgets-0.30.1/app/packs/images/ sync ^\\.\\/.*$","webpack://decidim-development-app/webpack/bootstrap","webpack://decidim-development-app/webpack/runtime/compat get default export","webpack://decidim-development-app/webpack/runtime/define property getters","webpack://decidim-development-app/webpack/runtime/hasOwnProperty shorthand","webpack://decidim-development-app/webpack/runtime/publicPath","webpack://decidim-development-app/../../.rbenv/versions/3.3.4/lib/ruby/gems/3.3.0/gems/decidim-budgets-0.30.1/app/packs/entrypoints/decidim_budgets.js"],"sourcesContent":["$(() => {\n  const checkProgressPosition = () => {\n    const progressRef = document.querySelectorAll(\"[data-progress-reference]\");\n    if (progressRef.length) {\n      const progressFix = document.querySelectorAll(\"[data-progressbox-fixed]\");\n      let selectedProgressRef = \"\";\n      let selectedProgressFix = \"\";\n      const progressVisibleClass = \"is-progressbox-visible\";\n      if (window.matchMedia(\"(min-width: 768px)\").matches) {\n        selectedProgressRef = progressRef[1];\n        selectedProgressFix = progressFix[1];\n      } else {\n        selectedProgressRef = progressRef[0];\n        selectedProgressFix = progressFix[0];\n      }\n      if (!progressRef) {\n        return;\n      }\n      let progressPosition = selectedProgressRef.getBoundingClientRect().bottom;\n      if (progressPosition > 0) {\n        selectedProgressFix.classList.remove(progressVisibleClass);\n      } else {\n        selectedProgressFix.classList.add(progressVisibleClass);\n      }\n    }\n  };\n  window.addEventListener(\"scroll\", checkProgressPosition);\n  window.DecidimBudgets = window.DecidimBudgets || {};\n  window.DecidimBudgets.checkProgressPosition = checkProgressPosition;\n});\n","const currentAllocationZero = () => {\n  const $budgetSummary = $(\".budget-summary__progressbox\");\n  return parseInt($budgetSummary.attr(\"data-current-allocation\"), 10) === 0;\n};\nconst isSafeUrl = (exitUrl) => {\n  if (!exitUrl) {\n    return false;\n  }\n  const safeUrls = [\n    $(\".budget-summary\").attr(\"data-safe-url\").replace(location.origin, \"\"),\n    `${location.pathname}#`,\n    `${location.href}#`,\n    \"#\"\n  ];\n  let safe = false;\n  safeUrls.forEach((url) => {\n    if (exitUrl.startsWith(url)) {\n      safe = true;\n    }\n  });\n  return safe;\n};\nconst allowExitFrom = ($el) => {\n  if (currentAllocationZero()) {\n    return true;\n  } else if ($el.attr(\"target\") === \"_blank\") {\n    return true;\n  } else if ($el.parents(\"#loginModal\").length > 0) {\n    return true;\n  } else if ($el.parents(\"#authorizationModal\").length > 0) {\n    return true;\n  } else if ($el.attr(\"id\") === \"exit-notification-link\") {\n    return true;\n  } else if ($el.parents(\"main\").length > 0) {\n    return true;\n  } else if (isSafeUrl($el.attr(\"href\"))) {\n    return true;\n  } else if (document.querySelector(\".panel-container\") && document.querySelector(\".panel-container\").contains($el[0])) {\n    return true;\n  }\n  return false;\n};\n$(() => {\n  const $exitNotification = $(\"#exit-notification\");\n  const $exitLink = $(\"#exit-notification-link\");\n  const defaultExitUrl = $exitLink.attr(\"href\");\n  const defaultExitLinkText = $exitLink.text();\n  const signOutPath = window.Decidim.config.get(\"sign_out_path\");\n  let exitLinkText = defaultExitLinkText;\n  if ($exitNotification.length < 1) {\n    return;\n  }\n  const openExitNotification = (url, method = null) => {\n    if (method && method !== \"get\") {\n      $exitLink.attr(\"data-method\", method);\n    } else {\n      $exitLink.removeAttr(\"data-method\");\n    }\n    $exitLink.attr(\"href\", url);\n    $exitLink.text(exitLinkText);\n    window.Decidim.currentDialogs[\"exit-notification\"].open();\n  };\n  $(document).on(\"click\", \"a\", (event) => {\n    exitLinkText = defaultExitLinkText;\n    const $link = $(event.currentTarget);\n    if (!allowExitFrom($link)) {\n      event.preventDefault();\n      openExitNotification($link.attr(\"href\"), $link.data(\"method\"));\n    }\n  });\n  $(`[href='${signOutPath}']`).on(\"click\", (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    const $link = $(event.currentTarget);\n    exitLinkText = $link.text();\n    openExitNotification($link.attr(\"href\"), $link.data(\"method\"));\n  });\n  $(\"a[data-dialog-open='exit-notification']\").on(\"click\", () => {\n    exitLinkText = defaultExitLinkText;\n    openExitNotification(defaultExitUrl);\n  });\n});\n","$(() => {\n  const $projects = $(\"#projects, #project-item\");\n  const $budgetSummaryTotal = $(\".budget-summary__progressbar-marks_right\");\n  const selectBudgetSummaryTotal = $budgetSummaryTotal.data(\"totalAllocation\");\n  const $budgetSummary = $(\".budget-summary__progressbox\");\n  const $voteButton = $(\".budget-vote-button\");\n  const totalAllocation = parseInt(selectBudgetSummaryTotal, 10);\n  const additionSelectorButtons = document.querySelectorAll(\".budget__list--header .button__pill\");\n  const cancelEvent = (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n  };\n  $voteButton.on(\"click\", \"span\", () => {\n    $(\".budget-list__action\").click();\n  });\n  $projects.on(\"click\", \".budget-list__action\", (event) => {\n    const currentAllocation = parseInt($budgetSummary.attr(\"data-current-allocation\"), 10);\n    const $currentTarget = $(event.currentTarget);\n    const projectAllocation = parseInt($currentTarget.attr(\"data-allocation\"), 10);\n    if ($currentTarget.attr(\"disabled\")) {\n      cancelEvent(event);\n    } else if ($currentTarget.attr(\"data-add\") === \"true\" && currentAllocation + projectAllocation > totalAllocation) {\n      window.Decidim.currentDialogs[\"budget-excess\"].toggle();\n      cancelEvent(event);\n    }\n  });\n  additionSelectorButtons.forEach(function(button) {\n    button.addEventListener(\"click\", function(event) {\n      additionSelectorButtons.forEach(function(element) {\n        element.classList.remove(\"button__pill--active\");\n      });\n      event.currentTarget.classList.add(\"button__pill--active\");\n    });\n  });\n});\n","var map = {\n\t\"./decidim/budgets/decidim_budgets.svg\": 94170\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 92859;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/decidim-packs/\";","import \"src/decidim/budgets/projects\";\nimport \"src/decidim/budgets/progressFixed\";\nimport \"src/decidim/budgets/exit_handler\";\nrequire.context(\"../images\", true);\nimport \"stylesheets/budgets.scss\";\n"],"names":["checkProgressPosition","progressRef","progressFix","selectedProgressRef","selectedProgressFix","progressVisibleClass","currentAllocationZero","$budgetSummary","isSafeUrl","exitUrl","safeUrls","safe","url","allowExitFrom","$el","$exitNotification","$exitLink","defaultExitUrl","defaultExitLinkText","signOutPath","exitLinkText","openExitNotification","method","event","$link","$projects","selectBudgetSummaryTotal","$voteButton","totalAllocation","additionSelectorButtons","cancelEvent","currentAllocation","$currentTarget","projectAllocation","button","element","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","module","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","getter","exports","definition","key","obj","prop"],"sourceRoot":""}