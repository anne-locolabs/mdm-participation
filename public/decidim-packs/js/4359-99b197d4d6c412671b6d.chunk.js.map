{"version":3,"file":"js/4359-99b197d4d6c412671b6d.chunk.js","mappings":"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","sources":["webpack://decidim-development-app/./node_modules/codemirror/addon/fold/foldgutter.js","webpack://decidim-development-app/./node_modules/codemirror/addon/fold/foldcode.js"],"sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"./foldcode\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./foldcode\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"foldGutter\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.clearGutter(cm.state.foldGutter.options.gutter);\n      cm.state.foldGutter = null;\n      cm.off(\"gutterClick\", onGutterClick);\n      cm.off(\"changes\", onChange);\n      cm.off(\"viewportChange\", onViewportChange);\n      cm.off(\"fold\", onFold);\n      cm.off(\"unfold\", onFold);\n      cm.off(\"swapDoc\", onChange);\n      cm.off(\"optionChange\", optionChange);\n    }\n    if (val) {\n      cm.state.foldGutter = new State(parseOptions(val));\n      updateInViewport(cm);\n      cm.on(\"gutterClick\", onGutterClick);\n      cm.on(\"changes\", onChange);\n      cm.on(\"viewportChange\", onViewportChange);\n      cm.on(\"fold\", onFold);\n      cm.on(\"unfold\", onFold);\n      cm.on(\"swapDoc\", onChange);\n      cm.on(\"optionChange\", optionChange);\n    }\n  });\n\n  var Pos = CodeMirror.Pos;\n\n  function State(options) {\n    this.options = options;\n    this.from = this.to = 0;\n  }\n\n  function parseOptions(opts) {\n    if (opts === true) opts = {};\n    if (opts.gutter == null) opts.gutter = \"CodeMirror-foldgutter\";\n    if (opts.indicatorOpen == null) opts.indicatorOpen = \"CodeMirror-foldgutter-open\";\n    if (opts.indicatorFolded == null) opts.indicatorFolded = \"CodeMirror-foldgutter-folded\";\n    return opts;\n  }\n\n  function isFolded(cm, line) {\n    var marks = cm.findMarks(Pos(line, 0), Pos(line + 1, 0));\n    for (var i = 0; i < marks.length; ++i) {\n      if (marks[i].__isFold) {\n        var fromPos = marks[i].find(-1);\n        if (fromPos && fromPos.line === line)\n          return marks[i];\n      }\n    }\n  }\n\n  function marker(spec) {\n    if (typeof spec == \"string\") {\n      var elt = document.createElement(\"div\");\n      elt.className = spec + \" CodeMirror-guttermarker-subtle\";\n      return elt;\n    } else {\n      return spec.cloneNode(true);\n    }\n  }\n\n  function updateFoldInfo(cm, from, to) {\n    var opts = cm.state.foldGutter.options, cur = from - 1;\n    var minSize = cm.foldOption(opts, \"minFoldSize\");\n    var func = cm.foldOption(opts, \"rangeFinder\");\n    // we can reuse the built-in indicator element if its className matches the new state\n    var clsFolded = typeof opts.indicatorFolded == \"string\" && classTest(opts.indicatorFolded);\n    var clsOpen = typeof opts.indicatorOpen == \"string\" && classTest(opts.indicatorOpen);\n    cm.eachLine(from, to, function(line) {\n      ++cur;\n      var mark = null;\n      var old = line.gutterMarkers;\n      if (old) old = old[opts.gutter];\n      if (isFolded(cm, cur)) {\n        if (clsFolded && old && clsFolded.test(old.className)) return;\n        mark = marker(opts.indicatorFolded);\n      } else {\n        var pos = Pos(cur, 0);\n        var range = func && func(cm, pos);\n        if (range && range.to.line - range.from.line >= minSize) {\n          if (clsOpen && old && clsOpen.test(old.className)) return;\n          mark = marker(opts.indicatorOpen);\n        }\n      }\n      if (!mark && !old) return;\n      cm.setGutterMarker(line, opts.gutter, mark);\n    });\n  }\n\n  // copied from CodeMirror/src/util/dom.js\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  function updateInViewport(cm) {\n    var vp = cm.getViewport(), state = cm.state.foldGutter;\n    if (!state) return;\n    cm.operation(function() {\n      updateFoldInfo(cm, vp.from, vp.to);\n    });\n    state.from = vp.from; state.to = vp.to;\n  }\n\n  function onGutterClick(cm, line, gutter) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    if (gutter != opts.gutter) return;\n    var folded = isFolded(cm, line);\n    if (folded) folded.clear();\n    else cm.foldCode(Pos(line, 0), opts);\n  }\n\n  function optionChange(cm, option) {\n    if (option == \"mode\") onChange(cm)\n  }\n\n  function onChange(cm) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    state.from = state.to = 0;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(function() { updateInViewport(cm); }, opts.foldOnChangeTimeSpan || 600);\n  }\n\n  function onViewportChange(cm) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(function() {\n      var vp = cm.getViewport();\n      if (state.from == state.to || vp.from - state.to > 20 || state.from - vp.to > 20) {\n        updateInViewport(cm);\n      } else {\n        cm.operation(function() {\n          if (vp.from < state.from) {\n            updateFoldInfo(cm, vp.from, state.from);\n            state.from = vp.from;\n          }\n          if (vp.to > state.to) {\n            updateFoldInfo(cm, state.to, vp.to);\n            state.to = vp.to;\n          }\n        });\n      }\n    }, opts.updateViewportTimeSpan || 400);\n  }\n\n  function onFold(cm, from) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var line = from.line;\n    if (line >= state.from && line < state.to)\n      updateFoldInfo(cm, line, line + 1);\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function doFold(cm, pos, options, force) {\n    if (options && options.call) {\n      var finder = options;\n      options = null;\n    } else {\n      var finder = getOption(cm, options, \"rangeFinder\");\n    }\n    if (typeof pos == \"number\") pos = CodeMirror.Pos(pos, 0);\n    var minSize = getOption(cm, options, \"minFoldSize\");\n\n    function getRange(allowFolded) {\n      var range = finder(cm, pos);\n      if (!range || range.to.line - range.from.line < minSize) return null;\n      if (force === \"fold\") return range;\n\n      var marks = cm.findMarksAt(range.from);\n      for (var i = 0; i < marks.length; ++i) {\n        if (marks[i].__isFold) {\n          if (!allowFolded) return null;\n          range.cleared = true;\n          marks[i].clear();\n        }\n      }\n      return range;\n    }\n\n    var range = getRange(true);\n    if (getOption(cm, options, \"scanUp\")) while (!range && pos.line > cm.firstLine()) {\n      pos = CodeMirror.Pos(pos.line - 1, 0);\n      range = getRange(false);\n    }\n    if (!range || range.cleared || force === \"unfold\") return;\n\n    var myWidget = makeWidget(cm, options, range);\n    CodeMirror.on(myWidget, \"mousedown\", function(e) {\n      myRange.clear();\n      CodeMirror.e_preventDefault(e);\n    });\n    var myRange = cm.markText(range.from, range.to, {\n      replacedWith: myWidget,\n      clearOnEnter: getOption(cm, options, \"clearOnEnter\"),\n      __isFold: true\n    });\n    myRange.on(\"clear\", function(from, to) {\n      CodeMirror.signal(cm, \"unfold\", cm, from, to);\n    });\n    CodeMirror.signal(cm, \"fold\", cm, range.from, range.to);\n  }\n\n  function makeWidget(cm, options, range) {\n    var widget = getOption(cm, options, \"widget\");\n\n    if (typeof widget == \"function\") {\n      widget = widget(range.from, range.to);\n    }\n\n    if (typeof widget == \"string\") {\n      var text = document.createTextNode(widget);\n      widget = document.createElement(\"span\");\n      widget.appendChild(text);\n      widget.className = \"CodeMirror-foldmarker\";\n    } else if (widget) {\n      widget = widget.cloneNode(true)\n    }\n    return widget;\n  }\n\n  // Clumsy backwards-compatible interface\n  CodeMirror.newFoldFunction = function(rangeFinder, widget) {\n    return function(cm, pos) { doFold(cm, pos, {rangeFinder: rangeFinder, widget: widget}); };\n  };\n\n  // New-style interface\n  CodeMirror.defineExtension(\"foldCode\", function(pos, options, force) {\n    doFold(this, pos, options, force);\n  });\n\n  CodeMirror.defineExtension(\"isFolded\", function(pos) {\n    var marks = this.findMarksAt(pos);\n    for (var i = 0; i < marks.length; ++i)\n      if (marks[i].__isFold) return true;\n  });\n\n  CodeMirror.commands.toggleFold = function(cm) {\n    cm.foldCode(cm.getCursor());\n  };\n  CodeMirror.commands.fold = function(cm) {\n    cm.foldCode(cm.getCursor(), null, \"fold\");\n  };\n  CodeMirror.commands.unfold = function(cm) {\n    cm.foldCode(cm.getCursor(), { scanUp: false }, \"unfold\");\n  };\n  CodeMirror.commands.foldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), { scanUp: false }, \"fold\");\n    });\n  };\n  CodeMirror.commands.unfoldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), { scanUp: false }, \"unfold\");\n    });\n  };\n\n  CodeMirror.registerHelper(\"fold\", \"combine\", function() {\n    var funcs = Array.prototype.slice.call(arguments, 0);\n    return function(cm, start) {\n      for (var i = 0; i < funcs.length; ++i) {\n        var found = funcs[i](cm, start);\n        if (found) return found;\n      }\n    };\n  });\n\n  CodeMirror.registerHelper(\"fold\", \"auto\", function(cm, start) {\n    var helpers = cm.getHelpers(start, \"fold\");\n    for (var i = 0; i < helpers.length; i++) {\n      var cur = helpers[i](cm, start);\n      if (cur) return cur;\n    }\n  });\n\n  var defaultOptions = {\n    rangeFinder: CodeMirror.fold.auto,\n    widget: \"\\u2194\",\n    minFoldSize: 0,\n    scanUp: false,\n    clearOnEnter: true\n  };\n\n  CodeMirror.defineOption(\"foldOptions\", null);\n\n  function getOption(cm, options, name) {\n    if (options && options[name] !== undefined)\n      return options[name];\n    var editorOptions = cm.options.foldOptions;\n    if (editorOptions && editorOptions[name] !== undefined)\n      return editorOptions[name];\n    return defaultOptions[name];\n  }\n\n  CodeMirror.defineExtension(\"foldOption\", function(options, name) {\n    return getOption(this, options, name);\n  });\n});\n"],"names":["mod","CodeMirror","cm","val","old","onGutterClick","onChange","onViewportChange","onFold","optionChange","State","parseOptions","updateInViewport","Pos","options","opts","isFolded","line","marks","i","fromPos","marker","spec","elt","updateFoldInfo","from","to","cur","minSize","func","clsFolded","classTest","clsOpen","mark","pos","range","cls","vp","state","gutter","folded","option","doFold","force","finder","getOption","getRange","allowFolded","myWidget","makeWidget","e","myRange","widget","text","rangeFinder","funcs","start","found","helpers","defaultOptions","name","editorOptions"],"sourceRoot":""}